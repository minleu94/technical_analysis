# 策略設計規格書：Baseline Score Threshold Strategy

> **📖 文檔定位**：本文檔是**完整的策略設計規格書**，包含研究假設、參數定義、驗證方案、風險分析等技術細節。  
> 如需快速了解 buy_score 和 sell_score 的使用方法，請參考 [評分系統說明](SCORE_EXPLANATION.md)（用戶快速參考指南）。

## 1. 研究假設

**假設 1**：技術指標、圖形模式與成交量的綜合評分（TotalScore）能夠有效預測短期價格動能，當 TotalScore 超過特定閾值時，代表買入機會；低於特定閾值時，代表賣出時機。

**假設 2**：連續確認機制（confirm_days）能夠過濾市場噪音，減少假信號；cooldown 機制能夠避免過度交易，降低交易成本對績效的侵蝕。

---

## 2. 參數/信號定義

### 2.1 評分系統定義

#### TotalScore（總分）
- **定義**：0-100 分的綜合評分，由三個子分數加權計算
- **公式**：`TotalScore = W_pattern × PatternScore + W_indicator × IndicatorScore + W_volume × VolumeScore`
- **權重約束**：`W_pattern + W_indicator + W_volume = 1.0`（自動正規化）
- **市場狀態調整**：權重可根據 Regime（Trend/Reversion/Breakout）動態調整

#### PatternScore（圖形分數）
- **定義**：0-100 分，基於技術圖形模式識別結果
- **計算方式**：每個識別到的模式賦予對應分數，多模式時加權平均
- **模式類型**：頭肩頂/底、雙頂/底、三角形整理、旗形/楔形等
- **標準化規則**：所有模式分數統一映射到 0-100 區間

#### IndicatorScore（指標分數）
- **定義**：0-100 分，基於技術指標的綜合評分
- **包含指標**：RSI、MACD、KD、ADX、均線系統（MA5/10/20/60）、布林通道
- **計算方式**：每個指標標準化為 0-100 分後，依配置權重加權平均
- **標準化規則**：各指標使用歷史分位數或固定閾值進行標準化

#### VolumeScore（成交量分數）
- **定義**：0-100 分，基於成交量變化與異常檢測
- **計算因子**：成交量放大倍數、成交量異常檢測、量價關係分析
- **標準化規則**：相對於歷史平均成交量的倍數，映射到 0-100 區間

### 2.2 信號生成參數

#### buy_score（買入閾值）
- **定義**：觸發買入信號候選的 TotalScore 下限
- **預設值**：60 分
- **有效範圍**：0-100 分
- **語義解釋**：當 TotalScore >= buy_score 時，表示技術面綜合評分達到買入標準
- **設計原則**：應高於 TotalScore 的歷史中位數（約 50 分），以確保信號品質

#### sell_score（賣出閾值）
- **定義**：觸發賣出信號候選的 TotalScore 上限
- **預設值**：40 分
- **有效範圍**：0-100 分
- **語義解釋**：當 TotalScore <= sell_score 時，表示技術面綜合評分低於持有標準
- **設計原則**：應低於 TotalScore 的歷史中位數，且通常低於 buy_score，形成不對稱閾值

#### buy_confirm_days（買入確認天數）
- **定義**：需要連續多少天滿足 `TotalScore >= buy_score` 才產生買入信號
- **預設值**：2 天
- **有效範圍**：1-10 天（建議）
- **語義解釋**：過濾單日異常高分，確保信號持續性
- **設計原則**：過短（1 天）易產生假信號；過長（>5 天）可能錯過快速機會

#### sell_confirm_days（賣出確認天數）
- **定義**：需要連續多少天滿足 `TotalScore <= sell_score` 才產生賣出信號
- **預設值**：2 天
- **有效範圍**：1-10 天（建議）
- **語義解釋**：過濾單日異常低分，避免過早離場
- **設計原則**：可與 buy_confirm_days 不同，視風險偏好調整

#### cooldown_days（冷卻天數）
- **定義**：交易後多少天內禁止反向操作
- **預設值**：3 天
- **有效範圍**：0-30 天（建議）
- **語義解釋**：避免買賣信號快速切換，降低交易頻率與成本
- **設計原則**：0 表示無冷卻；過長可能錯過反向機會

### 2.3 信號生成邏輯

#### 買入信號生成條件
```
條件 1：未持倉（in_position == False）
條件 2：buy_confirmed == True（連續 buy_confirm_days 天滿足 TotalScore >= buy_score）
條件 3：不在 cooldown 期間（若上次交易為賣出，需距離 last_trade_date >= cooldown_days）
條件 4：不在 cooldown 期間（若上次交易為買入，需距離 last_trade_date >= cooldown_days）且當前為賣出信號候選時才禁止
```

**邏輯說明**：cooldown 僅禁止「反向操作」，即買入後 cooldown 期間禁止賣出，賣出後 cooldown 期間禁止買入。

#### 賣出信號生成條件
```
條件 1：已持倉（in_position == True）
條件 2：sell_confirmed == True（連續 sell_confirm_days 天滿足 TotalScore <= sell_score）
條件 3：不在 cooldown 期間（若上次交易為買入，需距離 last_trade_date >= cooldown_days）
```

### 2.4 連續確認計算規則

#### 確認信號計算邏輯
- **輸入**：布林序列 `condition`（True/False），確認天數 `confirm_days`
- **輸出**：確認後的信號序列 `confirmed`（True/False）
- **規則**：
  - 若 `confirm_days == 1`：直接返回 `condition`
  - 若 `confirm_days > 1`：檢查滑動窗口 `[i - confirm_days + 1 : i + 1]` 是否全部為 True
  - 僅在窗口最後一天標記為 `confirmed[i] = True`

**範例**：`confirm_days = 2`，序列為 `[False, True, True, False, True]`
- 第 0 天：窗口 `[False]` → `confirmed[0] = False`
- 第 1 天：窗口 `[False, True]` → `confirmed[1] = False`
- 第 2 天：窗口 `[True, True]` → `confirmed[2] = True`（連續 2 天滿足）
- 第 3 天：窗口 `[True, False]` → `confirmed[3] = False`
- 第 4 天：窗口 `[False, True]` → `confirmed[4] = False`

---

## 3. 驗證方案

### 3.1 資料切分策略

#### Train-Test Split（單次切分）
- **切分比例**：訓練集 70%，測試集 30%（可調整）
- **切分方式**：按時間順序切分，訓練集在前，測試集在後
- **用途**：快速評估策略是否過擬合
- **驗證指標**：
  - 訓練期 Sharpe Ratio vs 測試期 Sharpe Ratio
  - 訓練期年化報酬率 vs 測試期年化報酬率
  - 退化程度（Degradation）= `(test_sharpe - train_sharpe) / |train_sharpe|`
- **通過標準**：退化程度 < 30% 視為策略穩定

#### Walk-Forward（滾動窗口）
- **訓練期長度**：6 個月（可調整）
- **測試期長度**：3 個月（可調整）
- **步進長度**：3 個月（建議與測試期相同，避免重疊）
- **用途**：評估策略在不同市場環境下的穩定性
- **驗證指標**：
  - 各 Fold 的訓練期與測試期績效
  - 平均退化程度（Average Degradation）
  - 一致性（Consistency）= 測試期 Sharpe > 0 的比例
- **通過標準**：
  - 一致性 >= 60%
  - 平均退化程度 < 40%

### 3.2 Baseline 比較方案

#### 基準策略定義
1. **Buy & Hold（買入持有）**
   - 策略：期初買入，期末賣出
   - 用途：評估策略是否優於被動持有

2. **Random Entry（隨機進場）**
   - 策略：隨機選擇買入與賣出時點，保持相同交易頻率
   - 用途：評估信號是否有預測能力（vs 隨機）

3. **Simple Moving Average Crossover（簡單均線交叉）**
   - 策略：MA5 上穿 MA20 買入，下穿賣出
   - 用途：評估是否優於簡單技術指標

#### 比較指標
- **絕對績效**：總報酬率、年化報酬率、Sharpe Ratio、最大回撤
- **相對績效**：相對於 Buy & Hold 的超額報酬率
- **風險調整**：Sharpe Ratio 差異、最大回撤差異
- **統計顯著性**：使用 t-test 檢驗超額報酬是否顯著（p < 0.05）

### 3.3 參數敏感性分析

#### 參數範圍測試
- **buy_score**：40, 50, 60, 70, 80（5 個值）
- **sell_score**：20, 30, 40, 50, 60（5 個值）
- **buy_confirm_days**：1, 2, 3, 4, 5（5 個值）
- **sell_confirm_days**：1, 2, 3, 4, 5（5 個值）
- **cooldown_days**：0, 1, 3, 5, 10（5 個值）

#### 分析方式
- **網格搜索**：全參數組合（5^5 = 3125 種）
- **目標函數**：最大化測試期 Sharpe Ratio（避免過擬合）
- **約束條件**：`buy_score > sell_score`（確保邏輯合理）

#### 結果解讀
- **穩健參數**：在 80% 以上測試期表現穩定的參數組合
- **參數穩定性**：參數小幅變動時，績效變化 < 10%

---

## 4. 風險與失效模式

### 4.1 市場環境失效

#### 失效模式 1：趨勢反轉市場（Trend Reversal）
- **特徵**：強勢趨勢突然反轉，技術指標出現假突破
- **失效原因**：TotalScore 基於歷史模式，無法預測突發反轉
- **影響**：買入後快速下跌，sell_score 觸發過晚
- **緩解措施**：
  - 設置停損（stop_loss_pct）限制單筆虧損
  - 提高 sell_confirm_days 以延遲出場（但可能增加虧損）

#### 失效模式 2：低波動盤整市場（Low Volatility Consolidation）
- **特徵**：價格在窄幅區間震盪，技術指標信號混亂
- **失效原因**：TotalScore 在 40-60 區間頻繁波動，產生大量假信號
- **影響**：頻繁買賣，交易成本侵蝕報酬
- **緩解措施**：
  - 提高 buy_score 與降低 sell_score，擴大持有區間
  - 增加 cooldown_days 降低交易頻率

#### 失效模式 3：極端事件市場（Black Swan Events）
- **特徵**：突發重大事件（如疫情、戰爭），價格跳空
- **失效原因**：技術分析無法預測基本面突變
- **影響**：TotalScore 無法及時反應，可能持有虧損部位
- **緩解措施**：
  - 設置 ATR-based 停損（stop_loss_atr_mult）
  - 監控市場波動率，高波動時降低部位大小

### 4.2 策略參數失效

#### 失效模式 4：參數過擬合（Overfitting）
- **特徵**：訓練期表現優異，測試期表現大幅下降
- **失效原因**：參數過度優化到特定歷史數據
- **影響**：策略在實盤中失效
- **緩解措施**：
  - 強制使用 Walk-Forward 驗證
  - 限制參數搜索範圍，避免極端值
  - 要求測試期績效不低於訓練期 70%

#### 失效模式 5：確認天數過長（Delayed Signal）
- **特徵**：buy_confirm_days 或 sell_confirm_days 過長
- **失效原因**：信號延遲，錯過最佳進出場時點
- **影響**：買入時價格已上漲，賣出時價格已下跌
- **緩解措施**：
  - 確認天數不超過 5 天
  - 監控信號延遲時間，評估機會成本

### 4.3 數據品質失效

#### 失效模式 6：技術指標計算錯誤（Indicator Error）
- **特徵**：技術指標值異常（如 RSI > 100 或 < 0）
- **失效原因**：數據缺失、計算錯誤、除權息未調整
- **影響**：TotalScore 計算錯誤，產生錯誤信號
- **緩解措施**：
  - 數據驗證：檢查指標值是否在合理範圍
  - 缺失值處理：使用前向填充或跳過該日
  - 除權息調整：使用調整後價格計算指標

#### 失效模式 7：成交量數據異常（Volume Anomaly）
- **特徵**：成交量突然放大或縮小（如停牌、減資）
- **失效原因**：VolumeScore 計算基於異常數據
- **影響**：TotalScore 被異常成交量分數影響
- **緩解措施**：
  - 成交量異常檢測：超過 3 倍標準差時標記
  - 異常日 VolumeScore 使用歷史平均替代

---

## 5. 最小可行實驗（MVP）

### 5.1 實驗目標
用最少步驟驗證「TotalScore 閾值策略是否優於 Buy & Hold」。

### 5.2 實驗設計

#### 步驟 1：選擇測試標的
- **標的數量**：3-5 檔股票
- **選擇標準**：
  - 流動性良好（日均成交量 > 1000 張）
  - 數據完整（至少 2 年歷史數據）
  - 涵蓋不同產業（分散風險）

#### 步驟 2：設定固定參數
- **buy_score = 60**（預設值）
- **sell_score = 40**（預設值）
- **buy_confirm_days = 2**（預設值）
- **sell_confirm_days = 2**（預設值）
- **cooldown_days = 3**（預設值）
- **不進行參數優化**（避免過擬合）

#### 步驟 3：執行單次回測
- **日期範圍**：最近 1 年（2023-01-01 至 2023-12-31）
- **初始資金**：100 萬
- **手續費**：14.25 bps（台灣股票標準）
- **滑價**：5 bps
- **執行價格**：next_open（次一交易日開盤價）

#### 步驟 4：計算基準比較
- **Buy & Hold 報酬率**：`(期末價格 - 期初價格) / 期初價格`
- **策略報酬率**：回測報告中的 `total_return`
- **超額報酬率**：`策略報酬率 - Buy & Hold 報酬率`

#### 步驟 5：評估結果
- **通過標準**：
  - 超額報酬率 > 0（優於 Buy & Hold）
  - Sharpe Ratio > 0.5（風險調整後報酬可接受）
  - 最大回撤 < 30%（風險可控）
- **若通過**：進入下一階段（參數優化、Walk-Forward 驗證）
- **若未通過**：檢討策略假設，調整評分模型或信號邏輯

#### 步驟 6：升級為策略版本（Promote）
- **前提條件**：完成 Walk-Forward 驗證且通過升級條件檢查
- **升級條件**：
  - 基本績效指標：總報酬率 > 0、Sharpe Ratio >= 0.5、最大回撤 < 30%、勝率 >= 50%
  - Walk-Forward 驗證：一致性 >= 60%、平均退化程度 < 40%（可選）
  - Baseline 對比：優於 Buy & Hold（可選）
- **升級流程**：
  1. 在回測視圖中選擇通過驗證的回測結果
  2. 點擊「升級為策略版本」按鈕
  3. 系統自動檢查升級條件
  4. 通過後生成策略版本（包含參數、配置、回測摘要）
  5. 可選擇掛載到 Profile 或獨立使用
- **升級後用途**：升級後的策略版本可在推薦分析中使用，形成「推薦 → 回測 → 優化 → Promote → 再推薦」的完整閉環

### 5.3 實驗時程
- **數據準備**：1 天
- **回測執行**：1 天
- **結果分析**：1 天
- **總計**：3 天完成 MVP 驗證

### 5.4 實驗輸出
- **回測報告**：包含總報酬率、Sharpe Ratio、最大回撤、交易次數
- **權益曲線圖**：策略 vs Buy & Hold 的權益曲線對比
- **交易明細表**：所有買賣交易的日期、價格、報酬
- **結論報告**：策略是否通過 MVP 驗證，下一步建議

---

## 6. 回測指標解讀規範

### 6.1 核心績效指標

#### 總報酬率（Total Return）
- **定義**：`(期末權益 - 初始資金) / 初始資金`
- **解讀**：策略的絕對報酬表現
- **基準比較**：應優於 Buy & Hold 的總報酬率
- **注意事項**：未考慮時間價值，需配合年化報酬率解讀

#### 年化報酬率（Annual Return / CAGR）
- **定義**：`(期末權益 / 初始資金)^(1/年數) - 1`
- **解讀**：標準化後的年度報酬率，便於跨期間比較
- **基準比較**：應優於市場無風險利率（如 1-2%）
- **注意事項**：回測期間過短（< 1 年）時，年化報酬率可能失真

#### Sharpe Ratio（夏普比率）
- **定義**：`(年化報酬率 - 無風險利率) / 年化波動率 × √252`
- **解讀**：風險調整後的報酬率，數值越高越好
- **評級標準**：
  - < 0.5：表現不佳
  - 0.5-1.0：可接受
  - 1.0-2.0：良好
  - > 2.0：優秀
- **注意事項**：假設報酬率為常態分布，極端事件可能失真

#### 最大回撤（Max Drawdown）
- **定義**：從歷史最高點到最低點的最大跌幅（負數）
- **解讀**：策略的最大虧損風險
- **評級標準**：
  - < -10%：風險極低
  - -10% 至 -20%：風險可接受
  - -20% 至 -30%：風險較高
  - > -30%：風險極高
- **注意事項**：需配合恢復時間（Drawdown Duration）解讀

### 6.2 交易統計指標

#### 勝率（Win Rate）
- **定義**：`獲利交易次數 / 總交易次數`
- **解讀**：策略的準確率
- **基準比較**：應 > 50%（優於隨機）
- **注意事項**：高勝率不代表高報酬（可能小賺大賠）

#### 期望值（Expectancy）
- **定義**：`平均每筆交易的報酬率`
- **解讀**：策略的長期期望報酬
- **基準比較**：應 > 0（長期獲利）
- **注意事項**：需配合交易次數解讀（高期望值但低頻率可能總報酬低）

#### 獲利因子（Profit Factor）
- **定義**：`總獲利 / 總虧損（絕對值）`
- **解讀**：策略的獲利效率
- **評級標準**：
  - < 1.0：虧損策略
  - 1.0-1.5：勉強獲利
  - 1.5-2.0：良好
  - > 2.0：優秀
- **注意事項**：需配合勝率解讀（高獲利因子可能來自少數大賺交易）

### 6.3 指標綜合解讀原則

#### 原則 1：多指標綜合評估
- **不可單看總報酬率**：需同時評估 Sharpe Ratio 與最大回撤
- **不可單看勝率**：需同時評估期望值與獲利因子
- **不可單看 Sharpe Ratio**：需同時評估總報酬率與交易次數

#### 原則 2：基準比較優先
- **絕對績效**：總報酬率、年化報酬率、Sharpe Ratio
- **相對績效**：相對於 Buy & Hold 的超額報酬率
- **風險調整**：Sharpe Ratio 差異、最大回撤差異

#### 原則 3：穩定性評估
- **Walk-Forward 一致性**：各 Fold 測試期表現是否穩定
- **參數敏感性**：參數小幅變動時，績效變化是否 < 10%
- **退化程度**：測試期相對於訓練期的退化是否 < 30%

---

## 7. 策略優化建議

### 7.1 參數優化流程

#### 階段 1：粗調（Coarse Tuning）
- **目標**：找到參數的大致範圍
- **方法**：網格搜索，參數步長較大（如 buy_score: 40, 50, 60, 70, 80）
- **評估**：選擇測試期 Sharpe Ratio 最高的參數組合

#### 階段 2：細調（Fine Tuning）
- **目標**：在粗調範圍內找到最優參數
- **方法**：網格搜索，參數步長較小（如 buy_score: 55, 60, 65）
- **評估**：選擇測試期 Sharpe Ratio 最高的參數組合

#### 階段 3：穩定性驗證
- **目標**：確認參數在 Walk-Forward 驗證中穩定
- **方法**：使用最優參數執行 Walk-Forward 驗證
- **評估**：一致性 >= 60%，平均退化程度 < 40%
- **後續步驟**：通過驗證後，可通過 Promote 機制升級為正式策略版本

### 7.2 評分模型優化

#### 權重調整
- **方法**：根據市場狀態（Regime）動態調整權重
- **範例**：
  - 趨勢市場（Trend）：提高 IndicatorScore 權重
  - 反轉市場（Reversion）：提高 PatternScore 權重
  - 突破市場（Breakout）：提高 VolumeScore 權重

#### 指標選擇
- **方法**：使用特徵重要性分析，移除低貢獻指標
- **評估**：移除指標後，測試期 Sharpe Ratio 不下降

### 7.3 風險控制優化

#### 停損停利設置
- **固定百分比停損**：`stop_loss_pct = 10%`（單筆虧損不超過 10%）
- **ATR-based 停損**：`stop_loss_atr_mult = 2.0`（停損距離 = 2 × ATR）
- **固定百分比停利**：`take_profit_pct = 20%`（單筆獲利達到 20% 時出場）
- **ATR-based 停利**：`take_profit_atr_mult = 3.0`（停利距離 = 3 × ATR）

#### 部位大小調整
- **固定金額**：每次買入固定金額（如 10 萬）
- **風險百分比**：每次買入金額 = `初始資金 × risk_pct / stop_loss_pct`
- **等權重**：多檔股票時，每檔分配相同資金

---

## 8. 文檔維護規範

### 8.1 版本控制
- **版本號格式**：`v<major>.<minor>.<patch>`
- **重大變更**：修改策略邏輯、評分模型 → 升級 major 版本
- **參數調整**：修改預設參數 → 升級 minor 版本
- **文檔修正**：修正錯誤、補充說明 → 升級 patch 版本
- **策略版本管理**：通過 Promote 機制升級的回測結果會自動生成策略版本號，版本號由系統自動管理（如 "1.0.0", "1.1.0"）

### 8.2 變更記錄
- **變更日期**：記錄每次變更的日期
- **變更內容**：詳細說明變更的參數、邏輯、理由
- **驗證結果**：變更後的回測結果（總報酬率、Sharpe Ratio、最大回撤）
- **影響評估**：變更對策略績效的影響（提升/下降/無影響）

### 8.3 可追溯性要求
- **參數來源**：每個參數的預設值必須有文檔說明其來源（經驗值/優化結果/文獻參考）
- **邏輯依據**：每個信號生成邏輯必須有理論依據或實證支持
- **驗證證據**：每個策略版本必須有 Walk-Forward 驗證結果作為證據
- **升級記錄**：通過 Promote 機制升級的策略版本會自動記錄：
  - 來源回測 run_id
  - 升級時間
  - 回測摘要（總報酬率、Sharpe Ratio、最大回撤等）
  - 驗證指標（Walk-Forward 結果、Baseline 對比結果）

---

## 附錄 A：參數預設值總覽

> **注意**：以下預設值適用於 **Baseline Score Threshold** 策略。其他策略（如暴衝策略、穩健策略）有不同的預設值，詳見 [UI 功能文檔](UI_FEATURES_DOCUMENTATION.md)。

| 參數名稱 | 預設值 | 有效範圍 | 單位 | 說明 |
|---------|--------|---------|------|------|
| buy_score | 60 | 0-100 | 分 | 買入閾值 |
| sell_score | 40 | 0-100 | 分 | 賣出閾值 |
| buy_confirm_days | 2 | 1-10 | 天 | 買入確認天數 |
| sell_confirm_days | 2 | 1-10 | 天 | 賣出確認天數 |
| cooldown_days | 3 | 0-30 | 天 | 交易後冷卻天數 |

---

## 附錄 B：回測指標計算公式

### B.1 報酬率指標
- **總報酬率**：`R_total = (E_final - E_initial) / E_initial`
- **年化報酬率**：`R_annual = (E_final / E_initial)^(1/T) - 1`，其中 T = 年數

### B.2 風險指標
- **日報酬率序列**：`r_t = (E_t - E_{t-1}) / E_{t-1}`
- **年化波動率**：`σ_annual = σ_daily × √252`
- **Sharpe Ratio**：`SR = (R_annual - R_f) / σ_annual`，其中 R_f = 無風險利率

### B.3 回撤指標
- **累積最高點**：`H_t = max(E_0, E_1, ..., E_t)`
- **回撤序列**：`DD_t = (E_t - H_t) / H_t`
- **最大回撤**：`MDD = min(DD_t)`

---

## 附錄 C：參考文獻與理論依據

### C.1 技術分析理論
- **移動平均線理論**：價格與均線的關係反映趨勢強度
- **相對強弱指標（RSI）**：超買超賣區間判斷（RSI > 70 超買，RSI < 30 超賣）
- **MACD 理論**：快慢線交叉反映動能變化

### C.2 量化交易理論
- **信號確認機制**：連續確認可過濾市場噪音（參考：Technical Analysis of the Financial Markets, John J. Murphy）
- **交易成本影響**：高頻交易需考慮手續費與滑價（參考：Algorithmic Trading, Ernie Chan）

### C.3 風險管理理論
- **停損停利設置**：固定百分比 vs ATR-based（參考：Trading Systems, Emilio Tomasini）
- **部位大小調整**：風險百分比方法（參考：Position Sizing, Van K. Tharp）

---

---

## 附錄 D：Promote 機制使用指南

### D.1 升級條件檢查

系統會自動檢查以下條件：

1. **基本績效指標**：
   - 總報酬率 > 0
   - Sharpe Ratio >= 0.5（可調整）
   - 最大回撤 < 30%（可調整）
   - 勝率 >= 50%（可調整）

2. **Walk-Forward 驗證**（如果回測包含 Walk-Forward 結果）：
   - 一致性（Consistency）>= 60%
   - 平均退化程度（Average Degradation）< 40%

3. **Baseline 對比**（如果回測包含 Baseline 對比結果）：
   - 總報酬率 > Buy & Hold 總報酬率
   - Sharpe Ratio > Buy & Hold Sharpe Ratio（或 >= 0.5）

### D.2 升級流程

1. **執行回測**：在回測視圖中執行策略回測
2. **保存結果**：點擊「保存結果」按鈕，保存回測結果
3. **檢查條件**：點擊「升級為策略版本」按鈕，系統自動檢查升級條件
4. **確認升級**：如果通過檢查，輸入版本名稱（可選）和備註（可選），確認升級
5. **使用策略版本**：升級後的策略版本可在推薦分析中載入使用

### D.3 策略版本管理

- **版本查詢**：可在系統中查詢所有已升級的策略版本
- **版本載入**：在推薦分析中可選擇載入特定策略版本
- **版本追溯**：每個策略版本都包含完整的回測摘要和驗證指標，可追溯其來源

---

**文檔版本**：v1.1.0  
**最後更新**：2026-01-02  
**維護者**：量化研究團隊  
**更新內容**：新增 Promote 機制使用指南（附錄 D）

---

## 📚 相關文檔

- **[評分系統說明](SCORE_EXPLANATION.md)**：buy_score 和 sell_score 的快速參考指南（用戶使用指南）
- **[使用者指南](USER_GUIDE.md)**：複雜功能的使用教程，包含參數最佳化、Walk-forward 驗證等
- **[Phase 2 架構設計](PHASE2_ARCHITECTURE.md)**：策略可插拔規格、執行器介面設計等架構細節

