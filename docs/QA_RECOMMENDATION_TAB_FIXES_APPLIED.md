# Recommendation Analysis Tab å·²ä¿®å¾©å•é¡Œæ¸…å–®

## âœ… å·²ä¿®å¾©çš„å•é¡Œ

### 1. é¡å‹è½‰æ›éŒ¯èª¤ - æ¼²å¹…%è¨ˆç®—ï¼ˆâœ… å·²ä¿®å¾©ï¼‰

**éŒ¯èª¤**: `unsupported operand type(s) for -: 'str' and 'str'`  
**ä½ç½®**: `ui_app/strategy_configurator.py:350-353`  
**åŸå› **: `latest_df.get(close_col, 0)` è¿”å›å­—ç¬¦ä¸²è€Œéæ•¸å€¼  
**ä¿®å¾©**: ä½¿ç”¨ `pd.to_numeric()` ç¢ºä¿é¡å‹è½‰æ›ï¼Œä¸¦æ­£ç¢ºè¨ªå• DataFrame å€¼

### 2. é¡å‹è½‰æ›éŒ¯èª¤ - æˆäº¤é‡è®ŠåŒ–ç‡%è¨ˆç®—ï¼ˆâœ… å·²ä¿®å¾©ï¼‰

**éŒ¯èª¤**: `unsupported operand type(s) for -: 'str' and 'str'`  
**ä½ç½®**: `ui_app/strategy_configurator.py:364-380`  
**åŸå› **: æˆäº¤é‡æ¬„ä½æ˜¯å­—ç¬¦ä¸²é¡å‹  
**ä¿®å¾©**: ä½¿ç”¨ `pd.to_numeric()` ç¢ºä¿é¡å‹è½‰æ›

### 3. é¡å‹è½‰æ›éŒ¯èª¤ - åœ–å½¢æ¨¡å¼è­˜åˆ¥ï¼ˆâœ… å·²ä¿®å¾©ï¼‰

**éŒ¯èª¤**: `unsupported operand type(s) for -: 'str' and 'str'`  
**ä½ç½®**: `analysis_module/pattern_analysis/pattern_analyzer.py:178`  
**åŸå› **: `prices = df[price_col].values` è¿”å›å­—ç¬¦ä¸²æ•¸çµ„  
**ä¿®å¾©**: åœ¨ `find_peaks_and_troughs` å’Œ `identify_w_bottom` ä¸­æ·»åŠ é¡å‹è½‰æ›

### 4. ç¼ºå¤±æ–¹æ³• - _get_regime_weightsï¼ˆâœ… å·²ä¿®å¾©ï¼‰

**éŒ¯èª¤**: `'ScoringEngine' object has no attribute '_get_regime_weights'`  
**ä½ç½®**: `ui_app/scoring_engine.py:63`  
**åŸå› **: æ–¹æ³•è¢«èª¿ç”¨ä½†æœªå®šç¾©  
**ä¿®å¾©**: æ·»åŠ  `_get_regime_weights` æ–¹æ³•ï¼Œæ ¹æ“šä¸åŒ Regime èª¿æ•´æ¬Šé‡

### 5. æ—¥æœŸè§£æå•é¡Œï¼ˆâœ… å·²ä¿®å¾©ï¼‰

**éŒ¯èª¤**: æ—¥æœŸç¯„åœé¡¯ç¤ºç‚º `1970-01-01`  
**ä½ç½®**: `app_module/recommendation_service.py:82`  
**åŸå› **: `pd.to_datetime()` ç„¡æ³•æ­£ç¢ºè§£æ YYYYMMDD æ ¼å¼  
**ä¿®å¾©**: æ·»åŠ å¤šç¨®æ—¥æœŸæ ¼å¼æ”¯æŒ

---

## ğŸ“Š æ¸¬è©¦çµæœ

### ä¿®å¾©å‰
- âŒ æ‰€æœ‰ 50 æ”¯è‚¡ç¥¨éƒ½æ‹‹å‡ºç•°å¸¸
- âŒ `generate_recommendations` è¿”å›ç©º DataFrame
- âŒ çµ±è¨ˆï¼šæˆåŠŸ=0, ç„¡çµæœ=50, ç•°å¸¸=50

### ä¿®å¾©å¾Œ
- âœ… æ¸¬è©¦è…³æœ¬æ­£å¸¸é‹è¡Œå®Œæˆ
- âœ… æ²’æœ‰ç•°å¸¸éŒ¯èª¤
- âœ… çµ±è¨ˆï¼šæˆåŠŸ=0, ç„¡çµæœ=50, ç•°å¸¸=0
- âš ï¸ ä»è¿”å› 0 å€‹æ¨è–¦ï¼ˆå¯èƒ½æ˜¯ç¯©é¸æ¢ä»¶æˆ–æ•¸æ“šå•é¡Œï¼Œéœ€è¦é€²ä¸€æ­¥èª¿æŸ¥ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

é›–ç„¶æ‰€æœ‰ç•°å¸¸éƒ½å·²ä¿®å¾©ï¼Œä½†ä»è¿”å› 0 å€‹æ¨è–¦ã€‚å¯èƒ½åŸå› ï¼š

1. **ç¯©é¸æ¢ä»¶å¤ªåš´æ ¼**ï¼šå³ä½¿ä½¿ç”¨æ¥µå¯¬é¬†çš„æ¢ä»¶ï¼ˆ`price_change_min: -100%`, `volume_ratio_min: 0.0`ï¼‰ï¼Œä»ç„¡çµæœ
2. **åœ–å½¢æ¨¡å¼æœªè­˜åˆ¥**ï¼šWåº•æ¨¡å¼å¯èƒ½å¤ªåš´æ ¼ï¼Œæ²’æœ‰è‚¡ç¥¨ç¬¦åˆ
3. **åˆ†æ•¸è¨ˆç®—å•é¡Œ**ï¼šæ‰€æœ‰è‚¡ç¥¨çš„åˆ†æ•¸å¯èƒ½éƒ½ç‚º 0 æˆ–éä½

å»ºè­°ï¼š
- æª¢æŸ¥ `generate_recommendations` è¿”å›çš„ DataFrame æ˜¯å¦ç‚ºç©ºï¼ˆåœ¨ç¯©é¸å‰ï¼‰
- é©—è­‰åœ–å½¢æ¨¡å¼è­˜åˆ¥é‚è¼¯
- æª¢æŸ¥åˆ†æ•¸è¨ˆç®—æ˜¯å¦æ­£ç¢º

---

## ğŸ“ ä¿®å¾©æ–‡ä»¶æ¸…å–®

1. `ui_app/strategy_configurator.py` - ä¿®å¾©æ¼²å¹…%å’Œæˆäº¤é‡è®ŠåŒ–ç‡%çš„é¡å‹è½‰æ›
2. `analysis_module/pattern_analysis/pattern_analyzer.py` - ä¿®å¾©åƒ¹æ ¼æ•¸æ“šçš„é¡å‹è½‰æ›
3. `ui_app/scoring_engine.py` - æ·»åŠ  `_get_regime_weights` æ–¹æ³•
4. `app_module/recommendation_service.py` - ä¿®å¾©æ—¥æœŸè§£æ

---

## âœ… é©—è­‰æ–¹å¼

é‹è¡Œæ¸¬è©¦è…³æœ¬ï¼š
```bash
python scripts/qa_validate_recommendation_tab.py
```

é æœŸçµæœï¼š
- âœ… æ¸¬è©¦è…³æœ¬æ­£å¸¸é‹è¡Œå®Œæˆ
- âœ… æ²’æœ‰ç•°å¸¸éŒ¯èª¤
- âœ… ç”Ÿæˆé©—è­‰å ±å‘Šï¼š`output/qa/recommendation_tab/VALIDATION_REPORT.md`

