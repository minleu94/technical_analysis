"""
Tab 說明內容配置檔案
集中管理所有 Tab 的說明文字，避免硬編碼在 UI 中

Tab 層級結構：
- 主 Tab（5個）：
  * update: 數據更新（有 View + InfoButton）
  * market_watch: 市場觀察（容器 Tab，包含 5 個子 Tab，此 key 為整體說明用，無獨立 View）
  * recommendation: 推薦分析（有 View + InfoButton）
  * backtest: 策略回測（有 View + InfoButton）
  * watchlist: 觀察清單（有 View + InfoButton）

- 市場觀察子 Tab（5個，皆有 View + InfoButton）：
  * market_regime: 大盤指數
  * strong_stocks: 強勢個股
  * weak_stocks: 弱勢個股
  * strong_industries: 強勢產業
  * weak_industries: 弱勢產業

總共 10 個 key：9 個有對應的 View 和 InfoButton，1 個（market_watch）為容器說明 key
"""

TAB_INFO = {
    "update": {
        "title": "數據更新",
        "what": "這是系統的數據維護中心，負責更新和檢查股票、大盤、產業指數的歷史數據。",
        "how_to_use": [
            "點擊「檢查數據狀態」查看當前數據完整性（日期範圍、缺失日期）",
            "設置「查找範圍（天）」來檢查最近 N 天內是否有缺失的交易日數據",
            "使用「普通合併」進行增量更新，將新數據合併到現有數據中",
            "使用「強制重新合併」完全重建所有數據（適用於數據損壞或格式變更）",
            "定期檢查數據狀態，確保系統分析的數據完整性"
        ],
        "misconceptions": [
            "不是用來做技術分析的：這裡只負責數據維護，不提供分析功能",
            "不保證數據即時性：數據更新依賴外部 API，可能有延遲",
            "不是交易決策工具：數據更新本身不產生買賣建議"
        ]
    },
    "market_watch": {
        "title": "市場觀察",
        "what": "這是市場儀表板，提供大盤狀態、強勢/弱勢個股與產業的即時排名，幫助你快速掌握市場動態。",
        "how_to_use": [
            "先查看「大盤指數」了解整體市場狀態（Trend/Reversion/Breakout）",
            "切換「本日/本周」查看不同時間範圍的強勢/弱勢排名",
            "在「強勢個股」或「弱勢個股」中，點擊「加入觀察清單」將感興趣的股票加入候選池",
            "查看「強勢產業/弱勢產業」了解產業相對強弱和輪動線索",
            "定期刷新數據，保持對市場變化的敏感度"
        ],
        "misconceptions": [
            "不是買賣訊號：排名只是市場表現的客觀反映，不等於投資建議",
            "不保證未來表現：強勢股可能轉弱，弱勢股可能反彈，排名僅供參考",
            "不是選股工具：這裡提供的是市場觀察，選股需要結合其他分析"
        ]
    },
    "market_regime": {
        "title": "大盤指數",
        "what": "這是市場狀態檢測器，判斷當前大盤處於趨勢、反轉或突破狀態，為策略選擇提供市場環境參考。",
        "how_to_use": [
            "點擊「檢測市場狀態」獲取當前大盤狀態（Trend/Reversion/Breakout）",
            "查看「市場狀態」了解判斷依據和信心度",
            "參考「策略建議」了解適合當前市場環境的策略類型（可結合 Profile/策略參與方式）",
            "結合「推薦分析」Tab 中的 Regime 設定，調整策略參數",
            "定期檢測，追蹤市場狀態變化"
        ],
        "misconceptions": [
            "不是預測工具：市場狀態是對當前情況的判斷，不預測未來",
            "不保證策略獲利：即使判斷正確，策略執行仍可能失敗",
            "不是唯一決策依據：應結合其他分析工具綜合判斷"
        ]
    },
    "strong_stocks": {
        "title": "強勢個股",
        "what": "這是強勢股排名視圖，顯示當前表現優異的個股，幫助你發現市場熱點和相對強弱。",
        "how_to_use": [
            "切換「本日/本周」查看不同時間範圍的強勢股排名",
            "查看排名和分數，了解個股的強勢程度",
            "點擊「加入觀察清單」將感興趣的股票加入候選池",
            "結合「推薦分析」Tab 進一步分析這些強勢股",
            "定期刷新，追蹤排名變化"
        ],
        "misconceptions": [
            "不是買入建議：強勢股可能已經漲高，追高有風險",
            "不保證持續強勢：排名會變化，強勢股可能轉弱",
            "不是選股工具：這裡只提供排名，選股需要更多分析"
        ]
    },
    "weak_stocks": {
        "title": "弱勢個股",
        "what": "這是弱勢股排名視圖，顯示當前表現較差的個股，幫助你識別市場風險和避開弱勢標的。",
        "how_to_use": [
            "切換「本日/本周」查看不同時間範圍的弱勢股排名",
            "查看排名和分數，了解個股的弱勢程度",
            "用於風險管理：避開排名靠前的弱勢股",
            "結合「推薦分析」Tab 分析是否有反彈機會（需謹慎）",
            "定期刷新，追蹤排名變化"
        ],
        "misconceptions": [
            "不是賣出建議：弱勢股可能反彈，不應僅憑排名決定賣出",
            "不等於沒有價值：弱勢可能是暫時的，需要深入分析",
            "不是做空工具：系統不提供做空建議，僅供風險識別"
        ]
    },
    "strong_industries": {
        "title": "強勢產業",
        "what": "這是強勢產業排名視圖，顯示當前表現優異的產業板塊，幫助你了解產業相對強弱和輪動線索。",
        "how_to_use": [
            "切換「本日/本周」查看不同時間範圍的強勢產業排名",
            "查看排名和分數，了解產業的強勢程度",
            "結合「強勢個股」查看該產業中的個股表現",
            "用於板塊輪動分析：了解哪些產業相對強勢，作為輪動線索",
            "定期刷新，追蹤產業排名變化"
        ],
        "misconceptions": [
            "不是投資建議：強勢產業中的個股不一定都值得投資",
            "不保證持續強勢：產業輪動是常態，排名會變化",
            "不是選股工具：這裡只提供產業排名，選股需要看個股"
        ]
    },
    "weak_industries": {
        "title": "弱勢產業",
        "what": "這是弱勢產業排名視圖，顯示當前表現較差的產業板塊，幫助你識別市場風險和避開弱勢板塊。",
        "how_to_use": [
            "切換「本日/本周」查看不同時間範圍的弱勢產業排名",
            "查看排名和分數，了解產業的弱勢程度",
            "用於風險管理：避開排名靠前的弱勢產業",
            "結合「弱勢個股」查看該產業中的個股表現",
            "定期刷新，追蹤產業排名變化"
        ],
        "misconceptions": [
            "不是賣出建議：弱勢產業中的個股不一定都要賣出",
            "不等於沒有機會：弱勢可能是暫時的，需要深入分析",
            "不是做空工具：系統不提供做空建議，僅供風險識別"
        ]
    },
    "recommendation": {
        "title": "推薦分析",
        "what": "這是策略推薦引擎，根據你設定的技術指標、圖形模式和市場狀態，產出符合條件的股票名單與推薦理由。",
        "how_to_use": [
            "選擇「市場狀態」（Trend/Reversion/Breakout）或使用「自動檢測」",
            "配置技術指標參數（RSI、MACD、KD、ADX、均線等）",
            "配置圖形模式參數（突破、反轉、整理等）",
            "點擊「執行推薦分析」產出名單",
            "查看推薦理由（Why），理解系統為何推薦這些股票",
            "將感興趣的股票「加入觀察清單」，後續可在「策略回測」中驗證"
        ],
        "misconceptions": [
            "不是買賣訊號：推薦只是「符合條件」，不等於投資建議",
            "不保證獲利：符合條件的股票仍可能下跌，需要進一步驗證",
            "不是買賣決策：這裡提供的是「候選名單」，需經過回測驗證與風險管理後才能作為決策參考"
        ]
    },
    "backtest": {
        "title": "策略回測",
        "what": "這是策略驗證實驗室，讓你用歷史數據測試交易策略，評估策略表現並優化參數。",
        "how_to_use": [
            "選擇股票（單檔或從觀察清單載入）",
            "選擇策略和配置參數（買入/賣出閾值、停損停利、部位管理等）",
            "設定回測日期範圍",
            "執行「單檔回測」或「批次回測」",
            "查看回測結果（報酬率、最大回撤、勝率等）",
            "使用「參數最佳化」找出最佳參數組合",
            "使用「Walk-forward 驗證」驗證策略穩定性",
            "保存回測結果，建立策略庫"
        ],
        "misconceptions": [
            "不保證未來表現：過去表現不代表未來，回測僅供參考",
            "不是交易決策：回測是研究工具，實際交易需要更多考量",
            "不是選股工具：回測驗證策略，選股需要結合其他分析",
            "避免過度最佳化：參數最佳化可能導致過擬合，需用 Walk-forward 驗證策略穩定性"
        ]
    },
    "watchlist": {
        "title": "觀察清單",
        "what": "這是候選股票池，集中管理從「市場觀察」和「推薦分析」加入的股票，方便後續分析和回測。",
        "how_to_use": [
            "從「市場觀察」或「推薦分析」Tab 將股票加入觀察清單",
            "在觀察清單中查看所有候選股票",
            "為股票添加備註和標籤，記錄關注原因",
            "在「策略回測」Tab 中，從觀察清單載入股票進行回測",
            "定期整理觀察清單，移除不再關注的股票",
            "使用「選股清單管理」保存和載入不同的候選池"
        ],
        "misconceptions": [
            "不是買賣清單：觀察清單只是候選池，不等於要買的股票",
            "不保證獲利：加入觀察清單的股票仍需進一步分析",
            "不是投資組合：這裡只是候選池，不是實際持倉"
        ]
    }
}

def get_tab_info(tab_key: str) -> dict:
    """
    獲取指定 Tab 的說明資訊
    
    Args:
        tab_key: Tab 的 key（例如 "update", "recommendation"）
    
    Returns:
        包含 title, what, how_to_use, misconceptions 的字典
    """
    return TAB_INFO.get(tab_key, {
        "title": "說明尚未補齊",
        "what": "此 Tab 的說明尚未配置",
        "how_to_use": [],
        "misconceptions": []
    })

